% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit_common_trend.R
\name{fit_common_trend}
\alias{fit_common_trend}
\title{Fit Polynomial Regression for One Unit (with optional covariates and pooled beta subtraction)}
\usage{
fit_common_trend(
  data,
  unit,
  degree,
  unit_var,
  time_var,
  outcome_var,
  treat_time_var,
  covariate_vars = NULL,
  beta_hat = NULL
)
}
\arguments{
\item{data}{The full data frame.}

\item{unit}{A single unit (e.g., state or municipality) to subset on.}

\item{degree}{Degree of the polynomial used for fitting (integer).}

\item{unit_var}{Name of the unit variable (string).}

\item{time_var}{Name of the time variable (string).}

\item{outcome_var}{Name of the outcome variable (string).}

\item{treat_time_var}{Name of the treatment year variable (string).}

\item{covariate_vars}{Optional character vector of covariate names.}

\item{beta_hat}{Optional named vector of estimated coefficients for covariates.}
}
\value{
A data frame with original outcome, prediction, and treatment time.
}
\description{
This function fits a unit-specific polynomial trend to pre-treatment data.
If covariates and a common beta_hat are provided (from pooled OLS or IV),
it subtracts the covariate effect from the outcome before estimating the trend.
}
